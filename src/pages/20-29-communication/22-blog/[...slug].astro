---
import JDPage from "../../../layouts/BlogPost.astro";

import { getCollection } from "astro:content";
// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  const blogEntries = await getCollection("blog");
  return blogEntries.map((entry) => ({
    // Astro strips periods from our slugs: put them back with regex
    // entry.slug looks like 22010000-title
    params: {
      slug: entry.slug.replace(/^(\d\d)(\d\d)(\d\d\d\d)(.*)/, "$1.$2.$3$4"),
    },
    props: { entry },
  }));
}
// 2. When it's time to render, you can get the entry directly from the prop
const { entry } = Astro.props;
const { Content } = await entry.render();
---

<JDPage {...entry.data}>
  <Content />
</JDPage>
